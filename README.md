# TikTok Mock

字节跳动 2025 训练营前端作业

## 项目部署

```bash
# 安装依赖
pnpm install

# 启动 dev 服务器
pnpm run dev

# 构建 app
pnpm run build
```

## 技术栈

- React
- 框架 [Modern.js](https://modernjs.dev/zh/index.html)
- UI库 [Semi Design](https://semi.design/zh-CN/)
- 状态管理 [Jotai](https://jotai.org/)
- 轮播组件 [Swiper](https://swiperjs.com/)
- 播放器组件 [xgplayer](https://h5player.bytedance.com/)

## 项目说明

### 关于视频播放

由于无法获取抖音视频源，所有的视频链接都使用 [xgplayer](https://h5player.bytedance.com/) 网页示例中的样例视频链接代替 (https://sf1-cdn-tos.huoshanstatic.com/obj/media-fe/xgplayer_doc_video/mp4/xgplayer-demo-360p.mp4)


### 已实现的模块

#### 推荐视频区域

- **视频内容展示**
  - 作者名、视频名、视频介绍
  - 弹幕输入框（仅前端 UI）
- **播放器**
  - 播放 / 暂停
    - 点击视频 或 按下空格可以暂停/播放
    - 拖拽进度条可调整视频播放进度
  - 进度条
    - 支持鼠标悬停、点击、拖拽任意位置跳转
    - 进度条缓冲条、已播放条、高亮球完全对齐抖音样式
  - 播放速度
    - 右下角设置齿轮 → 播放速度菜单
    - 选项：0.5×、0.75×、正常、1.25×、1.5×、2.0×
    - 切换即时生效
  - 全屏 / 退出全屏
    - 支持右下角全屏按钮
    - 全屏状态下 UI 自动适配，进度条等控件保持抖音官方位置和样式
  - 音量控制
    - 鼠标悬停进度条右侧自动出现垂直音量滑块
    - 支持鼠标滚轮或者点击在视频区域直接调节音量（向上增大，向下减小）
    - 静音按钮切换，图标实时变化
    - 音量持久化（本地存储，同一浏览器下次打开保持上次音量）
  - 键盘上下键切换视频
- **评论区**
  - 评论展示（UI保持一致），可以发送文字评论
    - 视频播放器右侧或底部固定「评论」按钮（图标 + 数字气泡）
    - 点击评论按钮 → 右侧/底部滑出抽屉式评论面板（参考抖音官网右滑抽屉）
  - 评论列表展示（UI 100% 对齐抖音官网）
    - 头像 + 昵称 + 评论内容 + 时间 + 点赞数 + 回复按钮
    - 评论内容支持自动换行、多行展示
    - 支持展开「查看更多回复」（回复暂不做，但需预留收起/展开交互）
    - 回复区域（二级评论）缩进展示，UI 与抖音完全一致（左侧细线 + 更小头像）
  - 发送评论
    - 抽屉底部固定输入框 + 「发布」按钮
    - 支持纯文字评论（无需支持表情、@人、图片）
    - 输入时发布按钮高亮，空内容时置灰
    - 点击发布 → 调用接口 / mock 成功后：
      - 新评论即时插入列表顶部（乐观更新）
      - 输入框清空
      - 自动滚动到最新评论
      - 评论总数 +1
  - 评论点赞交互
    - 每条评论右侧小红心图标（默认灰心）
    - 点击 → 空心变成实心红色 + 数字 +1 + 轻微放大动画（参考抖音破裂动效）
    - 再次点击 → 取消点赞，红心变灰心，数字 -1
  - 复制评论（替换原「举报」和「分享」功能）
    - 每条评论右侧 [...] 更多按钮 → 下拉菜单只有一个选项：「复制评论」，替换「举报评论」
    - 分享同样改成复制评论，Icon 改成合适的 copy icon
    - 点击后复制评论全文到剪贴板
    - 同时弹出 Toast 提示「复制成功」
  - 隐藏评论（点破裂的小红心）
    - 触发后该评论变灰并展示：“该评论已被隐藏”
    - 隐藏仅前端本地生效（不后端）
- **侧边栏**
  - 侧边栏UI复原
  - 鼠标移动上去有刷新视频列表的Icon提示，点击后将会刷新视频流
- **搜索框**
  - 聚焦时边框高亮
  - 按 Enter 或点击「搜索」按钮 → 无需跳转，只做样式
  - 搜索历史记录持久化存储（记录搜索关键词）

#### 精选区

- **展示分区 Tab**
- **布局与交互**
  - 布局：5 列瀑布流
  - 卡片内容：视频封面图 + 标题（2 行截断） + 作者头像 + 作者昵称 + 点赞数
  - 点击任意卡片（图片/标题/头像区域）→ 跳转到视频详情页
- **视频详情页**
  - 详情页功能与「视频播放区」完全一致（播放器、弹幕、评论区、推荐视频侧边栏等）
  - 左上角「×」关闭按钮：
    - 点击后执行 navigate(-1)
    - 保持浏览历史正确返回到来源页（精选区）并恢复滚动位置

### 文件结构

```bash
src
├── apis        # 本地 Mock API
├── assets      # 静态数据
│   ├── datas   # 爬取的视频和评论数据
│   ├── icons   # SVG 图标
│   └── logos   # TikTok Logo
├── components  # 组件
├── hooks       # 自定义 Hooks
├── pages       # 按 Pages 区分的组件
├── routes      # 路由
├── types       # 视频和评论数据 Interface 定义
└── utils       # 帮助类函数
```

### 数据来源

使用 [MediaCrawler](https://github.com/NanmiCoder/MediaCrawler) 爬取部分视频和评论数据，存放在 `src/assets/datas` 目录下

从抖音官网获取部分 SVG 图标文件，存放在 `src/assets/icons` 目录下

从抖音官网获取抖音 Logo 图像文件，存放在 `src/assets/logos` 目录下
